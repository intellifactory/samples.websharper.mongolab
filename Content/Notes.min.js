function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
var JSON;JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function f(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,e){var s,l,h,a,v=n,c,o=e[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i));typeof t=="function"&&(o=t.call(e,i,o));switch(typeof o){case"string":return f(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=u,c=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,s=0;s<a;s+=1)c[s]=r(s,o)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));else for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",u="",typeof e=="number")for(o=0;o<e;o+=1)u+=" ";else typeof e=="string"&&(u=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return r("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw;a=self;b=a.Notes=a.Notes||{};c=b.Client=b.Client||{};d=a.WebSharper=a.WebSharper||{};e=d.Operators=d.Operators||{};f=d.MongoLab=d.MongoLab||{};g=f.Variables=f.Variables||{};h=d.Html=d.Html||{};i=h.Client=h.Client||{};j=i.Operators=i.Operators||{};k=i.Tags=i.Tags||{};l=i.Attr=i.Attr||{};m=i.EventsPervasives=i.EventsPervasives||{};n=d.Obj=d.Obj||{};o=i.AttributeBuilder=i.AttributeBuilder||{};p=d.Piglets=d.Piglets||{};q=p.Pervasives=p.Pervasives||{};r=p.Piglet=p.Piglet||{};s=c.Note=c.Note||{};t=f.Functions=f.Functions||{};u=f.Types=f.Types||{};v=u.Database=u.Database||{};w=u.Collection=u.Collection||{};x=p.Controls=p.Controls||{};y=a.EventTarget;z=i.Pagelet=i.Pagelet||{};A=d.JavaScript=d.JavaScript||{};B=A.Pervasives=A.Pervasives||{};C=a.StartupCode$WebSharper_MongoLab$Variables=a.StartupCode$WebSharper_MongoLab$Variables||{};D=i.Element=i.Element||{};E=d.Arrays=d.Arrays||{};F=i.TagBuilder=i.TagBuilder||{};G=a.StartupCode$WebSharper_Html_Client$Html=a.StartupCode$WebSharper_Html_Client$Html||{};H=p.Stream=p.Stream||{};I=p.Reader=p.Reader||{};J=p.Result=p.Result||{};K=p.Submitter=p.Submitter||{};L=d.Concurrency=d.Concurrency||{};M=u.PushableCollection=u.PushableCollection||{};N=d.List=d.List||{};O=N.T=N.T||{};P=a.Node;Q=a.WindowOrWorkerGlobalScope;R=d.Enumerator=d.Enumerator||{};S=i.Text=i.Text||{};T=a.StartupCode$WebSharper_Html_Client$Events=a.StartupCode$WebSharper_Html_Client$Events||{};U=i.Attribute=i.Attribute||{};V=i.Implementation=i.Implementation||{};W=V.JQueryHtmlProvider=V.JQueryHtmlProvider||{};X=i.DeprecatedTagBuilder=i.DeprecatedTagBuilder||{};Y=a.IntelliFactory=a.IntelliFactory||{};Z=Y.Reactive=Y.Reactive||{};_0=Z.HotStream=Z.HotStream||{};_1=p.ErrorMessage=p.ErrorMessage||{};_2=p.Id=p.Id||{};_3=p.ConcreteWriter=p.ConcreteWriter||{};_4=L.AsyncBody=L.AsyncBody||{};_5=d.Ref=d.Ref||{};_6=d.Unchecked=d.Unchecked||{};_7=u.Constraint=u.Constraint||{};_8=a.Object;_9=a.StartupCode$Notes$Client=a.StartupCode$Notes$Client||{};_=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};$=L.CT=L.CT||{};ba=i.Events=i.Events||{};bb=ba.JQueryEventSupport=ba.JQueryEventSupport||{};bc=d.Control=d.Control||{};bd=bc.FSharpEvent=bc.FSharpEvent||{};be=a.StartupCode$WebSharper_Piglets$Piglets=a.StartupCode$WebSharper_Piglets$Piglets||{};bf=L.Scheduler=L.Scheduler||{};bg=u.Condition=u.Condition||{};bh=d.Seq=d.Seq||{};bi=d.CancellationTokenSource=d.CancellationTokenSource||{};bj=d.Util=d.Util||{};bk=R.T=R.T||{};bl=a.Error;bm=d.OperationCanceledException=d.OperationCanceledException||{};bn=d.InvalidOperationException=d.InvalidOperationException||{};bo=bc.Event=bc.Event||{};bp=bo.Event=bo.Event||{};bq=d.Collections=d.Collections||{};br=bq.List=bq.List||{};bs=Y&&Y.Runtime;bt=a.Date;bu=a.jQuery;bv=a.JSON;bw=a.console;c.Main=function(){var bx,by,bz,bA,bB,bC,bD,bE,bF;function bG(bI,bJ){a.jQuery("#form").toggleClass("visible");}function bH(bI,bJ,bK){var bL,bM,bN,bO;return j.add((bL=[l.Attr().NewAttr("id","form")],k.Tags().NewTag("div",bL)),[j.add((bM=[l.Attr().NewAttr("class","container")],k.Tags().NewTag("div",bM)),[(bN=[k.Tags().text("Title")],k.Tags().NewTag("label",bN)),x.input("text",a.id,a.id,bI),j.add(x.TextArea(bJ),[l.Attr().NewAttr("rows","4")]),(bO=[j.add(x.Submit(bK),[l.Attr().NewAttr("value","Save")])],k.Tags().NewTag("div",bO))])]);}(g.Key())[0]="pS_nPkhL6Co1H2sLRuovMj7rz5XEVMMF";bx=j.add((by=[l.Attr().NewAttr("id","wrapper")],k.Tags().NewTag("div",by)),[j.add((bz=[l.Attr().NewAttr("id","header")],k.Tags().NewTag("div",bz)),[(bA=[k.Tags().text("Notes")],k.Tags().NewTag("h1",bA)),(bB=(bC=[k.Tags().text("+ New")],k.Tags().NewTag("button",bC)),(function(bI){m.Events().OnClick(function(bJ){return function(bK){return bG(bJ,bK);};},bI);}(bB),bB)),(bD=[l.Attr().NewAttr("class","fix")],k.Tags().NewTag("div",bD))]),r.Render(bs.Curried3(bH),r.Run(function(bI){var bJ;L.Start((bJ=null,L.Delay(function(){return L.Bind(t.Push(bI,t.op_GreaterMinus(new v.New("websharper"),new w.New("Notes"))),function(bK){return bK?(a.alert("Saved!"),c.loadNotes(),L.Zero()):L.Zero();});})),null);},r.WithSubmit(q.op_LessMultiplyGreater(q.op_LessMultiplyGreater(r.Return(function(bI){return function(bJ){return s.New(bI,bt.now(),bJ);};}),r.Yield("")),r.Yield(""))))),j.add((bE=[l.Attr().NewAttr("id","notes")],k.Tags().NewTag("div",bE)),[(bF=[l.Attr().NewAttr("src","loading.gif")],k.Tags().NewTag("img",bF))])]);self.document.body.appendChild(bx.get_Body());c.loadNotes();};c.loadNotes=function(){var bx;L.Start((bx=null,L.Delay(function(){return L.Bind(t.Fetch(t.op_GreaterMinus(new v.New("websharper"),new w.New("Notes"))),function(by){var bz,bA,bB,bC;bz=(bA=E.map(function(bD){var bE,bF,bG,bH,bI,bJ,bK,bL;bE=new bt(bD.Date);return j.add((bF=[l.Attr().NewAttr("class","note")],k.Tags().NewTag("div",bF)),[(bG=[k.Tags().text(bD.Title)],k.Tags().NewTag("h2",bG)),(bH=[(bI=c.months().get_Item(bE.getMonth())+" "+(bJ=bE.getDate(),a.String(bJ))+", "+(bK=bE.getFullYear(),a.String(bK)),k.Tags().text(bI))],k.Tags().NewTag("span",bH)),(bL=[k.Tags().text(bD.Text)],k.Tags().NewTag("p",bL))]);},by),j.add((bB=[l.Attr().NewAttr("id","notes")],k.Tags().NewTag("div",bB)),bA));bC=self.document.getElementById("wrapper");bC.replaceChild(bz.get_Body(),bC.lastChild);return L.Zero();});})),null);};c.months=function(){_9.$cctor();return _9.months;};e.InvalidOp=function(bx){throw new bn.New(bx);};e.FailWith=function(bx){throw new bl(bx);};g.Key=function(){C.$cctor();return C.Key;};g.BaseUrl=function(){C.$cctor();return C.BaseUrl;};j.add=function(bx,by){var bz;bz=R.Get(by);try{while(bz.MoveNext())bx.AppendI(bz.Current());}finally{if(typeof bz=="object"&&"Dispose"in bz)bz.Dispose();}return bx;};k.Tags=function(){G.$cctor();return G.Tags$1;};l.Attr=function(){G.$cctor();return G.Attr$1;};m.Events=function(){T.$cctor();return T.Events;};n=d.Obj=bs.Class({Equals:function(bx){return this===bx;}},null,n);n.New=bs.Ctor(function(){},n);o=i.AttributeBuilder=bs.Class({NewAttr:function(bx,by){return U.New(this.HtmlProvider,bx,by);}},n,o);o.New=bs.Ctor(function(bx){n.New.call(this);this.HtmlProvider=bx;},o);q.op_LessMultiplyGreater=function(bx,by){var bz,bA;return r.New(H.Ap(bx.stream,by.stream),(bz=bx.view,(bA=by.view,function(bB){return bA(bz(bB));})));};r.Return=function(bx){return r.New(new H.New(new J({$:0,$0:bx}),null),a.id);};r.Yield=function(bx){var by;by=new H.New(new J({$:0,$0:bx}),null);return r.New(by,function(bz){return bz(by);});};r.WithSubmit=function(bx){var by;function bz(bA,bB){return(bx.view(bA))(bB);}by=new K.New(bx.stream,false);return r.New(by.get_Output(),function(bA){return bz(bA,by);});};r.Run=function(bx,by){return r.RunResult(J.Iter(bx),by);};r.Render=function(bx,by){return by.view(bx);};r.RunResult=function(bx,by){by.stream.Subscribe(bx);return by;};s.New=function(bx,by,bz){return{Title:bx,Date:by,Text:bz};};t.op_GreaterMinus=function(bx,by){return new M.New(by.get_Name(),bx);};t.Push=function(bx,by){return L.FromContinuations(function(bz){var bA;bu.ajax((g.BaseUrl())[0]+w.ToString(by)+"&apiKey="+(g.Key())[0],(bA={},bA.type="POST",bA.data=bv.stringify(bx),bA.success=function(){return bz(true);},bA.headers={"Content-Type":"application/json"},bA));});};t.Fetch=function(bx){return L.FromContinuations(function(by){bu.getJSON((g.BaseUrl())[0]+w.ToString(bx)+"&apiKey="+(g.Key())[0],null,function(bz){return by(bz);});});};v=u.Database=bs.Class({get_Name:function(){return this.name;}},n,v);v.New=bs.Ctor(function(bx){n.New.call(this);this.name=bx;},v);w=u.Collection=bs.Class({get_Name:function(){return this.name;},set_Database:function(bx){this.Database=bx;},get_Database:function(){return this.Database;},get_Constraint:function(){return this.Constraint;}},n,w);w.ToString=function(bx){return"/databases/"+bx.get_Database().$0.get_Name()+"/collections/"+bx.get_Name()+"?q="+(_7.get_ToString())(bx.get_Constraint());};w.New=bs.Ctor(function(bx){n.New.call(this);this.name=bx;this.Database=null;this.Constraint=null;this.Sorts=O.Empty;},w);x.TextArea=function(bx){var by,bz;function bA(bB){bx.Trigger(new J({$:0,$0:by.get_Value()}));}by=k.Tags().NewTag("textarea",[]);bz=bx.get_Latest();bz.$==0?by.set_Value(bz.$0):void 0;bx.Subscribe(function(bB){var bC;if(bB.$==1);else{bC=bB.$0;by.get_Value()!==bC?by.set_Value(bC):void 0;}});by.get_Body().addEventListener("keyup",bA,true);by.get_Body().addEventListener("change",bA,true);return by;};x.Submit=function(bx){var by;function bz(bA,bB){return bx.WebSharper_Piglets_Writer_1$Trigger(new J({$:0,$0:null}));}by=k.Tags().NewTag("input",[l.Attr().NewAttr("type","submit")]);(function(bA){m.Events().OnClick(function(bB){return function(bC){return bz(bB,bC);};},bA);}(by));return by;};x.input=function(bx,by,bz,bA){var bB,bC;function bD(bE){var bF;bF=new J({$:0,$0:by(bB.get_Value())});!_6.Equals(bF,bA.get_Latest())?bA.Trigger(bF):void 0;}bB=k.Tags().NewTag("input",[l.Attr().NewAttr("type",bx)]);bC=bA.get_Latest();bC.$==0?bB.set_Value(bz(bC.$0)):void 0;bA.Subscribe(function(bE){var bF;if(bE.$==1);else{bF=bz(bE.$0);bB.get_Value()!==bF?bB.set_Value(bF):void 0;}});bB.get_Body().addEventListener("keyup",bD,true);bB.get_Body().addEventListener("change",bD,true);return bB;};z=i.Pagelet=bs.Class({Render:a.ignore},n,z);z.New=bs.Ctor(function(){n.New.call(this);},z);B.NewFromSeq=function(bx){var by,bz,bA;by={};bz=R.Get(bx);try{while(bz.MoveNext()){bA=bz.Current();by[bA[0]]=bA[1];}}finally{if(typeof bz=="object"&&"Dispose"in bz)bz.Dispose();}return by;};C.$cctor=function(){C.$cctor=a.ignore;C.BaseUrl=["https://api.mongolab.com/api/1"];C.Key=[""];};D=i.Element=bs.Class({AppendI:function(bx){var by,bz;by=bx.get_Body();by.nodeType===2?this.HtmlProvider.AppendAttribute(this.get_Body(),by):this.HtmlProvider.AppendNode(this.get_Body(),bx.get_Body());this.IsRendered?bx.Render():(bz=this.RenderInternal,this.RenderInternal=function(){bz();bx.Render();});},set_Value:function(bx){this.HtmlProvider.SetValue(this.get_Body(),bx);},get_Value:function(){return this.HtmlProvider.GetValue(this.get_Body());},get_Body:function(){return this.Dom;},Render:function(){if(!this.IsRendered){this.RenderInternal();this.IsRendered=true;}}},z,D);D.New=function(bx,by){var bz,bA;bz=new D.New$1(bx);bA=self.document.createElement(by);bz.RenderInternal=a.ignore;bz.Dom=bA;bz.IsRendered=false;return bz;};D.New$1=bs.Ctor(function(bx){z.New.call(this);this.HtmlProvider=bx;},D);d.checkThis=function(bx){return _6.Equals(bx,null)?e.InvalidOp("The initialization of an object or value resulted in an object or value being accessed recursively before it was fully initialized."):bx;};E.get=function(bx,by){E.checkBounds(bx,by);return bx[by];};E.length=function(bx){return bx.dims===2?bx.length*bx.length:bx.length;};E.checkBounds=function(bx,by){if(by<0||by>=bx.length)e.FailWith("Index was outside the bounds of the array.");};F=i.TagBuilder=bs.Class({text:function(bx){return new S.New(bx);},NewTag:function(bx,by){var bz,bA;bz=D.New(this.HtmlProvider,bx);bA=R.Get(by);try{while(bA.MoveNext())bz.AppendI(bA.Current());}finally{if(typeof bA=="object"&&"Dispose"in bA)bA.Dispose();}return bz;}},n,F);F.New=bs.Ctor(function(bx){n.New.call(this);this.HtmlProvider=bx;},F);G.$cctor=function(){G.$cctor=a.ignore;G.HtmlProvider=new W.New();G.Attr=new o.New(V.HtmlProvider());G.Tags=new F.New(V.HtmlProvider());G.DeprecatedHtml=new X.New(V.HtmlProvider());G.Tags$1=V.Tags();G.Deprecated=V.DeprecatedHtml();G.Attr$1=V.Attr();};r=p.Piglet=bs.Class({},null,r);r.New=function(bx,by){return new r({stream:bx,view:by});};H.Ap=function(bx,by){var bz;bz=new H.New(J.Ap(bx.get_Latest(),by.get_Latest()),null);bx.Subscribe(function(bA){bz.Trigger(J.Ap(bA,by.get_Latest()));});by.Subscribe(function(bA){bz.Trigger(J.Ap(bx.get_Latest(),bA));});return bz;};I=p.Reader=bs.Class({},n,I);I.New=bs.Ctor(function(bx){n.New.call(this);this.id=bx;},I);H=p.Stream=bs.Class({Trigger:function(bx){this.s.Trigger(bx);},get_Latest:function(){return this.s.Latest[0].$0;},Subscribe:function(bx){return this.s.Subscribe(bj.observer(bx));},WebSharper_Piglets_Writer_1$Trigger:function(bx){this.Trigger(bx);}},I,H);H.New=bs.Ctor(function(bx,by){H.New$1.call(this,_0.New$1(bx),by);},H);H.New$1=bs.Ctor(function(bx,by){I.New.call(this,by==null?(_2.next())():by.$0);this.s=bx;},H);J=p.Result=bs.Class({},null,J);J.Iter=function(bx){return function(by){if(by.$==1);else bx(by.$0);};};J.Ap=function(bx,by){var bz;switch(bx.$==1?by.$==1?(bz=[bx.$0,by.$0],2):(bz=bx.$0,1):by.$==1?(bz=by.$0,1):(bz=[bx.$0,by.$0],0)){case 0:return new J({$:0,$0:bz[0](bz[1])});case 1:return new J({$:1,$0:bz});case 2:return new J({$:1,$0:N.append(bz[0],bz[1])});}};K=p.Submitter=bs.Class({get_Output:function(){return this.output;},get_Latest:function(){return this.output.get_Latest();},Subscribe:function(bx){return this.output.Subscribe(bx);},WebSharper_Piglets_Writer_1$Trigger:function(bx){this.writer.WebSharper_Piglets_Writer_1$Trigger(bx);}},I,K);K.New=bs.Ctor(function(bx,by){var bz;bz=this;I.New.call(this,(_2.next())());this.input=bx;this.output=new H.New(new J({$:1,$0:O.Empty}),null);this.writer=new _3.New$1(function(bA){var bB,bC;bC=bz.input.get_Latest();switch(bA.$==0?bC.$==0?(bB=bC.$0,2):(bB=bC.$0,1):bC.$==0?(bB=bA.$0,1):(bB=[bA.$0,bC.$0],0)){case 0:bz.output.Trigger(new J({$:1,$0:N.append(bB[0],bB[1])}));break;case 1:bz.output.Trigger(new J({$:1,$0:bB}));break;case 2:bz.output.Trigger(new J({$:0,$0:bB}));break;}});by?this.input.Subscribe(function(){var bA,bB;bA=bz.output.get_Latest();bA.$==1&&bA.$0.$==0?void 0:bz.output.Trigger(new J({$:1,$0:O.Empty}));}):void 0;},K);L.Delay=function(bx){return function(by){try{(bx(null))(by);}catch(bz){by.k({$:1,$0:bz});}};};L.Bind=function(bx,by){return L.checkCancel(function(bz){bx(_4.New(function(bA){var bB;if(bA.$==0){bB=bA.$0;L.scheduler().Fork(function(){try{(by(bB))(bz);}catch(bC){bz.k({$:1,$0:bC});}});}else L.scheduler().Fork(function(){bz.k(bA);});},bz.ct));});};L.Zero=function(){_.$cctor();return _.Zero;};L.Start=function(bx,by){var bz,bA;bz=(bA=(L.defCTS())[0],by==null?bA:by.$0);L.scheduler().Fork(function(){if(!bz.c)bx(_4.New(function(bB){if(bB.$==1)L.UncaughtAsyncError(bB.$0);},bz));});};L.checkCancel=function(bx){return function(by){if(by.ct.c)L.cancel(by);else bx(by);};};L.FromContinuations=function(bx){return function(by){var bz;function bA(bB){if(bz[0])e.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bz[0]=true;L.scheduler().Fork(bB);}}bz=[false];bx(function(bB){bA(function(){by.k({$:0,$0:bB});});},function(bB){bA(function(){by.k({$:1,$0:bB});});},function(bB){bA(function(){by.k({$:2,$0:bB});});});};};L.defCTS=function(){_.$cctor();return _.defCTS;};L.UncaughtAsyncError=function(bx){bw.log("WebSharper: Uncaught asynchronous exception",bx);};L.cancel=function(bx){bx.k({$:2,$0:new bm.New(bx.ct)});};L.scheduler=function(){_.$cctor();return _.scheduler;};L.Return=function(bx){return function(by){by.k({$:0,$0:bx});};};M=u.PushableCollection=bs.Class({},w,M);M.New=bs.Ctor(function(bx,by){w.New.call(this,bx);this[0]=this;this.init=1;d.checkThis(this[0]).set_Database({$:1,$0:by});},M);O=N.T=bs.Class({get_Item:function(bx){return bh.nth(bx,this);},GetEnumerator:function(){return new bk.New(this,null,function(bx){var by;by=bx.s;return by.$==0?false:(bx.c=by.$0,bx.s=by.$1,true);},void 0);}},null,O);O.Empty=new O({$:0});E.map=function(bx,by){var bz,bA,bB;bz=new a.Array(by.length);for(bA=0,bB=by.length-1;bA<=bB;bA++)bz[bA]=bx(by[bA]);return bz;};R.Get=function(bx){return bx instanceof a.Array?R.ArrayEnumerator(bx):_6.Equals(typeof bx,"string")?R.StringEnumerator(bx):bx.GetEnumerator();};R.ArrayEnumerator=function(bx){return new bk.New(0,null,function(by){var bz;bz=by.s;return bz<E.length(bx)&&(by.c=E.get(bx,bz),by.s=bz+1,true);},void 0);};R.StringEnumerator=function(bx){return new bk.New(0,null,function(by){var bz;bz=by.s;return bz<bx.length&&(by.c=bx[bz],by.s=bz+1,true);},void 0);};S=i.Text=bs.Class({get_Body:function(){return self.document.createTextNode(this.text);}},z,S);S.New=bs.Ctor(function(bx){z.New.call(this);this.text=bx;},S);T.$cctor=function(){T.$cctor=a.ignore;T.Events=new bb.New();};U=i.Attribute=bs.Class({get_Body:function(){var bx;bx=this.HtmlProvider.CreateAttribute(this.Name);bx.value=this.Value;return bx;}},z,U);U.New=function(bx,by,bz){var bA;bA=new U.New$1(bx);bA.Name=by;bA.Value=bz;return bA;};U.New$1=bs.Ctor(function(bx){z.New.call(this);this.HtmlProvider=bx;},U);W=V.JQueryHtmlProvider=bs.Class({AppendAttribute:function(bx,by){this.SetAttribute(bx,by.nodeName,by.value);},AppendNode:function(bx,by){var bz,bA;bz=bu(bx);bA=bu(by);bz.append.apply(bz,[bA]);},SetValue:function(bx,by){bu(bx).val(by);},GetValue:function(bx){return bu(bx).val();},CreateAttribute:function(bx){return self.document.createAttribute(bx);},SetAttribute:function(bx,by,bz){bu(bx).attr(by,bz);}},n,W);W.New=bs.Ctor(function(){n.New.call(this);},W);V.HtmlProvider=function(){G.$cctor();return G.HtmlProvider;};V.Tags=function(){G.$cctor();return G.Tags;};V.DeprecatedHtml=function(){G.$cctor();return G.DeprecatedHtml;};V.Attr=function(){G.$cctor();return G.Attr;};X=i.DeprecatedTagBuilder=bs.Class({},n,X);X.New=bs.Ctor(function(bx){n.New.call(this);this.HtmlProvider=bx;},X);_0=Z.HotStream=bs.Class({Trigger:function(bx){this.Latest[0]={$:1,$0:bx};this.Event.event.Trigger(bx);},Subscribe:function(bx){this.Latest[0]!=null?bx.OnNext(this.Latest[0].$0):void 0;return this.Event.event.Subscribe(bx);}},null,_0);_0.New$1=function(bx){return _0.New([{$:1,$0:bx}],new bd.New());};_0.New=function(bx,by){return new _0({Latest:bx,Event:by});};_1=p.ErrorMessage=bs.Class({},n,_1);_2.next=function(){be.$cctor();return be.next;};_3=p.ConcreteWriter=bs.Class({WebSharper_Piglets_Writer_1$Trigger:function(bx){this.trigger(bx);}},n,_3);_3.New$1=bs.Ctor(function(bx){n.New.call(this);this.trigger=bx;},_3);_4.New=function(bx,by){return{k:bx,ct:by};};_5.New=function(bx){return[bx];};_6.Equals=function(bx,by){var bz,bA,bB,bC;if(bx===by)return true;else{bz=typeof bx;if(bz=="object"){if(bx===null||bx===void 0||by===null||by===void 0)return false;else if("Equals"in bx)return bx.Equals(by);else if(bx instanceof a.Array&&by instanceof a.Array)return _6.arrayEquals(bx,by);else if(bx instanceof bt&&by instanceof bt)return _6.dateEquals(bx,by);else{bA=[true];for(var bD in bx)if(function(bE){bA[0]=!bx.hasOwnProperty(bE)||by.hasOwnProperty(bE)&&_6.Equals(bx[bE],by[bE]);return!bA[0];}(bD))break;if(bA[0]){for(var bE in by)if(function(bF){bA[0]=!by.hasOwnProperty(bF)||bx.hasOwnProperty(bF);return!bA[0];}(bE))break;}return bA[0];}}else return bz=="function"&&("$Func"in bx?bx.$Func===by.$Func&&bx.$Target===by.$Target:"$Invokes"in bx&&"$Invokes"in by&&_6.arrayEquals(bx.$Invokes,by.$Invokes));}};_6.arrayEquals=function(bx,by){var bz,bA;if(E.length(bx)===E.length(by)){bz=true;bA=0;while(bz&&bA<E.length(bx)){!_6.Equals(E.get(bx,bA),E.get(by,bA))?bz=false:void 0;bA=bA+1;}return bz;}else return false;};_6.dateEquals=function(bx,by){return bx.getTime()===by.getTime();};_7.get_ToString=function(){return function(bx){function by(bz){return bz.$==1?"{$and:["+by(bz.$0)+","+by(bz.$1)+"]}":bz.$==2?"{$or:["+by(bz.$0)+","+by(bz.$1)+"]}":bg.ToString(bz.$0,bz.$1);}return bx!=null&&bx.$==1?by(bx.$0):"{}";};};N.append=function(bx,by){var bz,bA,bB,bC,bD;if(bx.$==0)return by;else if(by.$==0)return bx;else{bC=new O({$:1});bz=bC;bA=bx;bB=true;while(bB){bz.$0=bA.$0;bA=bA.$1;bA.$==0?bB=false:bz=(bD=new O({$:1}),bz.$1=bD,bD);}bz.$1=by;return bC;}};N.ofArray=function(bx){var by,bz,bA;by=O.Empty;for(bz=E.length(bx)-1,bA=0;bz>=bA;bz--)by=new O({$:1,$0:E.get(bx,bz),$1:by});return by;};_9.$cctor=function(){_9.$cctor=a.ignore;_9.months=N.ofArray(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]);};_.$cctor=function(){_.$cctor=a.ignore;_.noneCT=$.New(false,[]);_.scheduler=new bf.New();_.defCTS=[new bi.New()];_.Zero=L.Return();_.GetCT=function(bx){bx.k({$:0,$0:bx.ct});};};$.New=function(bx,by){return{c:bx,r:by};};bb=ba.JQueryEventSupport=bs.Class({OnMouse:function(bx,by,bz){bu(bz.get_Body()).on(bx,function(bA){return by(bz,{X:bA.pageX,Y:bA.pageY,Event:bA});});},OnClick:function(bx,by){this.OnMouse("click",function(bz,bA){return(bx(bz))(bA);},by);}},n,bb);bb.New=bs.Ctor(function(){n.New.call(this);},bb);bd=bc.FSharpEvent=bs.Class({},n,bd);bd.New=bs.Ctor(function(){n.New.call(this);this.event=bp.New([]);},bd);be.$cctor=function(){var bx;be.$cctor=a.ignore;be.next=(bx=[0],function(){bx[0]++;return bx[0];});};bf=L.Scheduler=bs.Class({Fork:function(bx){var by;by=this;this.robin.push(bx);this.idle?(this.idle=false,a.setTimeout(function(){by.tick();},0)):void 0;},tick:function(){var bx,by,bz;by=this;bz=bt.now();bx=true;while(bx)if(this.robin.length===0){this.idle=true;bx=false;}else{(this.robin.shift())();bt.now()-bz>40?(a.setTimeout(function(){by.tick();},0),bx=false):void 0;}}},n,bf);bf.New=bs.Ctor(function(){n.New.call(this);this.idle=true;this.robin=[];},bf);bg.ToString=function(bx,by){return by.$==1?"{"+bx+":{$ne:"+bv.stringify(by.$0)+"}}":by.$==2?"{"+bx+":{$gt:"+bv.stringify(by.$0)+"}}":by.$==3?"{"+bx+":{$lt:"+bv.stringify(by.$0)+"}}":by.$==4?"{$and:["+bg.ToString(bx,by.$0)+","+bg.ToString(bx,by.$1)+"]}":by.$==5?"{$or:["+bg.ToString(bx,by.$0)+","+bg.ToString(bx,by.$1)+"]}":"{"+bx+":"+bv.stringify(by.$0)+"}";};bh.nth=function(bx,by){var bz,bA;if(bx<0)e.FailWith("negative index requested");bz=-1;bA=R.Get(by);try{while(bz<bx){!bA.MoveNext()?bh.insufficient():void 0;bz=bz+1;}return bA.Current();}finally{if(typeof bA=="object"&&"Dispose"in bA)bA.Dispose();}};bh.tryFindIndex=function(bx,by){var bz,bA,bB;bz=R.Get(by);try{bA=true;bB=0;while(bA&&bz.MoveNext())if(bx(bz.Current()))bA=false;else bB=bB+1;return bA?null:{$:1,$0:bB};}finally{if(typeof bz=="object"&&"Dispose"in bz)bz.Dispose();}};bi=d.CancellationTokenSource=bs.Class({},n,bi);bi.New=bs.Ctor(function(){n.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bi);bj.observer=function(bx){return{OnCompleted:function(){return null;},OnError:function(){return null;},OnNext:bx};};bk=R.T=bs.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},n,bk);bk.New=bs.Ctor(function(bx,by,bz,bA){n.New.call(this);this.s=bx;this.c=by;this.n=bz;this.d=bA;},bk);bm=d.OperationCanceledException=bs.Class({},bl,bm);bm.New=bs.Ctor(function(bx){bm.New$1.call(this,"The operation was canceled.",null,bx);},bm);bm.New$1=bs.Ctor(function(bx,by,bz){this.message=bx;this.inner=by;_8.setPrototypeOf(this,bm.prototype);this.ct=bz;},bm);bn=d.InvalidOperationException=bs.Class({},bl,bn);bn.New=bs.Ctor(function(bx){bn.New$2.call(this,bx,null);},bn);bn.New$2=bs.Ctor(function(bx,by){this.message=bx;this.inner=by;_8.setPrototypeOf(this,bn.prototype);},bn);bp=bo.Event=bs.Class({Trigger:function(bx){var by,bz,bA;by=this.Handlers.slice();for(bz=0,bA=by.length-1;bz<=bA;bz++)(E.get(by,bz))(null,bx);},Subscribe$1:function(bx){var by;function bz(bB,bC){return bx.OnNext(bC);}function bA(){by.RemoveHandler$1(bz);}by=this;this.AddHandler$1(bz);return{Dispose:function(){return bA();}};},AddHandler$1:function(bx){this.Handlers.push(bx);},RemoveHandler$1:function(bx){var by,bz;by=bh.tryFindIndex(function(bA){return _6.Equals(bx,bA);},this.Handlers);by==null?void 0:(bz=this.Handlers,bz.splice.apply(bz,[by.$0,1]));},Dispose:a.ignore,Subscribe:function(bx){return this.Subscribe$1(bx);}},null,bp);bp.New=function(bx){return new bp({Handlers:bx});};br=bq.List=bs.Class({GetEnumerator:function(){return R.Get(this);}},null,br);bh.insufficient=function(){return e.FailWith("The input sequence has an insufficient number of elements.");};bs.OnLoad(function(){c.Main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
